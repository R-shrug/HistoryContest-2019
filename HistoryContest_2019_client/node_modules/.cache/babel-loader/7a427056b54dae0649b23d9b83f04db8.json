{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\HistotyContest_2019\\\\HistoryContest-2019\\\\HistoryContest_2019_client\\\\src\\\\Components\\\\Test\\\\Test.js\";\nimport React from 'react';\nimport { Row, Col, Tabs, Button, Modal, Layout, Badge, message, Skeleton } from 'antd';\nimport 'antd/dist/antd.css';\nimport './Test.css';\nimport bg1 from '../../img/background1.png';\nimport BG from '../../img/图片2.jpg';\nimport mark from '../../img/校徽实体.png';\nimport Timer from '../Timer/Timer';\nimport Choice from '../Choice/Choice';\nimport TrueFalse from '../TrueFalse/TrueFalse';\nimport QueueAnim from 'rc-queue-anim';\nconst bg2 = React.lazy(() => import('../../img/background2.png'));\nconst bg3 = React.lazy(() => import('../../img/background3.png'));\nconst bg4 = React.lazy(() => import('../../img/background4.jpg'));\nconst bg5 = React.lazy(() => import('../../img/background5.jpg'));\nconst bg6 = React.lazy(() => import('../../img/background6.jpg'));\nconst bg7 = React.lazy(() => import('../../img/background7.jpg'));\nconst bg8 = React.lazy(() => import('../../img/background8.jpg'));\nconst bg9 = React.lazy(() => import('../../img/background9.jpg'));\nconst bg10 = React.lazy(() => import('../../img/background10.jpg'));\nconst bg11 = React.lazy(() => import('../../img/background11.jpg'));\nlet imgs = [bg1, bg2, bg3, bg4, bg5, bg6, bg7, bg8, bg9, bg10, bg11];\nconst TabPane = Tabs.TabPane;\nconst Header = Layout.Header,\n      Footer = Layout.Footer,\n      Content = Layout.Content;\n\nconst allChoiceQuestion = require(\"../../data/choice_question.json\");\n\nconst allJudgeQuestion = require(\"../../data/judgment_question.json\");\n\nclass Test extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTesting: false,\n      isPaperGet: false,\n      focusOn: 0,\n      pic: 0,\n      question: []\n    };\n\n    for (let i = 0; i < 20; i++) {\n      this.state.question.push({\n        isFinish: false,\n        kind: \"选择题\",\n        title: \"\",\n        option: [{}, {}, {}, {}],\n        value: -1\n      });\n    }\n\n    for (let i = 20; i < 30; i++) {\n      this.state.question.push({\n        isFinish: false,\n        kind: \"判断题\",\n        title: \"\",\n        option: ['√', '×'],\n        value: -1\n      });\n    }\n\n    this.done = this.done.bind(this);\n    this.Next = this.Next.bind(this);\n    this.Prev = this.Prev.bind(this);\n    this.submit = this.submit.bind(this);\n  }\n\n  Next(e) {\n    if (e) {\n      let x = this.state.focusOn;\n      x++;\n\n      if (x < 30) {\n        this.setState({\n          focusOn: x\n        });\n      }\n    } else {\n      setTimeout(() => {\n        let x = this.state.focusOn;\n        x++;\n\n        if (x < 30) {\n          this.setState({\n            focusOn: x\n          });\n        }\n      }, 500);\n    }\n  }\n\n  Prev() {\n    let n = this.state.focusOn;\n    n--;\n\n    if (n >= 0) {\n      this.setState({\n        focusOn: n\n      });\n    }\n  }\n\n  Random(arr) {\n    let length = arr.length,\n        randomIndex,\n        temp;\n\n    while (length) {\n      randomIndex = Math.floor(Math.random() * --length);\n      temp = arr[randomIndex];\n      arr[randomIndex] = arr[length];\n      arr[length] = temp;\n    }\n\n    return arr;\n  }\n\n  componentWillMount() {\n    //测试初始化\n    // for (let i = 0; i < 20; i++) {\n    //     this.state.question[i].title = allChoiceQuestion[i][\"title\"];\n    //     this.state.question[i].option=\n    //     [\n    //         {\n    //             text: allChoiceQuestion[i][\"options\"][0],\n    //             value: 1\n    //         },\n    //         {\n    //             text: allChoiceQuestion[i][\"options\"][1],\n    //             value: 2\n    //         },\n    //         {\n    //             text: allChoiceQuestion[i][\"options\"][2],\n    //             value: 3\n    //         },\n    //         {\n    //             text: allChoiceQuestion[i][\"options\"][3],\n    //             value: 4\n    //         }\n    //     ]\n    // }\n    // for (let i = 20; i < 30; i++) {\n    //     this.state.question[i].title = allJudgeQuestion[i-20][\"title\"];\n    // }\n    //试卷获取\n    this.setState({\n      isPaperGet: true\n    });\n    let that = this;\n    fetch('http://' + that.props.state.host + '/api/student/test', {\n      method: 'GET',\n      mode: 'cors',\n      headers: {\n        \"authorization\": that.props.state.token\n      }\n    }).then(res => {\n      return res.json();\n    }).then(data => {\n      if (data[\"message\"] == undefined) {\n        console.log(data.message);\n\n        if (data.status == 403) {\n          message.error(\"错误!该用户已完成答题\", 1.5);\n          that.props.logout();\n        } else {\n          //that.props.state.answer=data.Choice_question.concat(data.Judgment_question)\n          for (let i = 0; i < 20; i++) {\n            that.state.question[i].title = allChoiceQuestion[data.Paper.Choice_question[i] - 1][\"title\"];\n            let temp = [{\n              text: allChoiceQuestion[data.Paper.Choice_question[i] - 1][\"options\"][0],\n              value: 1\n            }, {\n              text: allChoiceQuestion[data.Paper.Choice_question[i] - 1][\"options\"][1],\n              value: 2\n            }, {\n              text: allChoiceQuestion[data.Paper.Choice_question[i] - 1][\"options\"][2],\n              value: 3\n            }, {\n              text: allChoiceQuestion[data.Paper.Choice_question[i] - 1][\"options\"][3],\n              value: 4\n            }];\n            that.state.question[i].option = this.Random(temp);\n            that.state.question[i].value = -1;\n          }\n\n          for (let i = 20; i < 30; i++) {\n            that.state.question[i].title = allJudgeQuestion[data.Paper.Judgment_question[i - 20] - 1][\"title\"];\n            that.state.question[i].value = -1;\n          }\n\n          that.setState({\n            isPaperGet: true\n          });\n        }\n      } else {\n        console.log(\"out\");\n        message.error(\"登陆已过期\", 1.5);\n        this.props.logout();\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    console.log(this.props.state.username);\n  }\n\n  submit() {\n    //暂时的提交函数\n    // this.props.setState({\n    //     isWelcome: false,\n    //     isLogin: true,\n    //     isStudent: true,\n    //     isAllDone: true,\n    //     isAdmin: false,\n    //     isTeacher: false,\n    //     host: \"\",\n    //         name: '菜鸡',\n    //         username: \"\",\n    //         token: '',\n    //         access: -1,\n    //         score: 90\n    //     answer: this.state.question\n    // })\n    //提交函数\n    let that = this;\n    let data = {\n      Answer: [],\n      Username: this.props.state.username\n    };\n    this.state.question.forEach((x, i) => {\n      data.Answer.push(x.value);\n    });\n    fetch(\"http://\" + that.props.state.host + \"/api/student/handin\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"authorization\": that.props.state.token,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(async res => {\n      if (res.status == 403) {\n        message.warning(\"非法答题!\", 1.5);\n      } else {\n        let data = await res.json();\n\n        if (data.message == undefined) {\n          if (data.msg == \"答题时间过短,请认真答题\") {\n            message.warning(\"答题时间过短,请认真答题\", 1);\n          } else {\n            console.log(\"handin successfully\");\n            message.success(\"提交成功!\", 1.5);\n            that.props.setState({\n              isAllDone: true,\n              answer: that.state.question\n            });\n            that.props.setState({\n              score: data.Score\n            });\n          }\n        } else {\n          message.error(\"登陆已过期\", 1.5);\n          this.props.logout();\n        }\n      }\n    });\n  }\n\n  done(i, value) {\n    let x = this.state.question;\n    x[i].isFinish = true;\n    x[i].value = value;\n    this.setState({\n      question: x\n    });\n  }\n\n  render() {\n    if (!this.state.isTesting) {\n      return React.createElement(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(BG, \")\"),\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          width: \"100%\",\n          height: \"100%\",\n          position: \"absolute\",\n          top: \"0px\",\n          bottom: \"0px\",\n          minWidth: \"700px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: !this.state.isTesting,\n        title: \"\\u7B54\\u9898\\u987B\\u77E5\",\n        centered: true,\n        footer: [React.createElement(Button, {\n          type: \"primary\",\n          loading: !this.state.isPaperGet,\n          onClick: () => {\n            let that = this; //temp\n            //  \n            //开始函数\n\n            fetch(\"http://\" + this.props.state.host + '/api/student/start', {\n              method: 'GET',\n              mode: 'cors',\n              headers: {\n                \"authorization\": that.props.state.token\n              }\n            }).then(data => {\n              if (data.message == undefined) {\n                message.success(\"答题开始,加油!\", 1.5);\n                that.setState({\n                  isTesting: true\n                });\n              } else {\n                message.error(\"登陆已过期\", 1.5);\n                this.props.logout();\n              }\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, \"\\u5F00\\u59CB\\u7B54\\u9898\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        style: {\n          fontSize: \"18px\",\n          color: \"#1890ff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"\\xA0\", this.props.state.name, \"\\u540C\\u5B66,\\u4F60\\u597D!\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\u6B22\\u8FCE\\u6765\\u5230\\u6821\\u53F2\\u6821\\u60C5\\u7ADE\\u8D5B\\u7B54\\u9898!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        style: {\n          fontSize: \"15px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"\\u672C\\u7B54\\u9898\\u5171\\u6709\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"30\\u9053\\u9898\"), \",\\xA0\\u5176\\u4E2D\\u6709\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"20\\u9053\\u9009\\u62E9\\u9898,\\xA010\\u9053\\u5224\\u65AD\\u9898\")), React.createElement(\"li\", {\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"\\u9009\\u62E9\\u9898\\u6BCF\\u90534\\u5206,\\xA0\\u5224\\u65AD\\u9898\\u6BCF\\u90532\\u5206,\\xA0\\u6EE1\\u5206\\u5171\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"100\\u5206\")), React.createElement(\"li\", {\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"\\u7B54\\u9898\\u65F6\\u9650\\u4E3A\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"3\\u5206\\u949F-30\\u5206\\u949F\"), \",\\xA03\\u5206\\u949F\\u4E4B\\u524D\\u65E0\\u6CD5\\u4EA4\\u5377,\\xA030\\u5206\\u949F\\u65F6\\u81EA\\u52A8\\u4EA4\\u5377\"), React.createElement(\"li\", {\n        key: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, \"\\u5728\\u672A\\u6210\\u529F\\u4EA4\\u5377\\u524D,\\xA0\\u51FA\\u73B0\\u7279\\u6B8A\\u60C5\\u51B5,\\u53EF\\u91CD\\u65B0\\u8FDB\\u5165\\u7B54\\u9898\"), React.createElement(\"li\", {\n        key: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"\\u5BF9\\u672C\\u7B54\\u9898\\u7CFB\\u7EDF\\u6709\\u7591\\u95EE,\\xA0\\u53EF\\u8054\\u7CFB\\u5728\\u573A\\u8D1F\\u8D23\\u8001\\u5E08\"))));\n    }\n\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(Layout, {\n      style: {\n        overflow: \"hidder\",\n        minWidth: \"1000px\",\n        height: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(QueueAnim, {\n      delay: 100,\n      duration: 700,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 16,\n      offset: 0,\n      key: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        color: 'white',\n        fontSize: \"calc(15px + 2vmin)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: mark,\n      height: \"45px\",\n      width: \"45px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }), \"\\xA0\\u4E1C\\u5357\\u5927\\u5B66\\u6821\\u53F2\\u6821\\u60C5\\u77E5\\u8BC6\\u7ADE\\u8D5B\")), React.createElement(Col, {\n      span: 4,\n      offset: 3,\n      key: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, React.createElement(Timer, {\n      state: this.state,\n      setState: this.setState.bind(this),\n      finish: this.submit,\n      min: 29,\n      sec: 59,\n      info: \"  答题倒计时：\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }))))), React.createElement(Content, {\n      style: {\n        backgroundColor: 'rgb(17,17,19)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 22,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(Tabs, {\n      className: \"background-1\",\n      activeKey: \"\".concat(this.state.focusOn),\n      animated: \"true\",\n      onTabClick: x => {\n        this.setState({\n          focusOn: x\n        });\n      },\n      tabBarGutter: \"0\",\n      tabPosition: \"bottom\",\n      style: {\n        marginBottom: \"0\",\n        marginLeft: \"0px\",\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, this.state.question.map((x, i) => React.createElement(TabPane, {\n      tab: !x.isFinish ? React.createElement(Badge, {\n        dot: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, i + 1)) : React.createElement(\"div\", {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, i + 1),\n      key: i,\n      onChange: () => {\n        this.done(i);\n      },\n      style: {\n        textAlign: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, x.kind == \"选择题\" ? React.createElement(Choice, {\n      className: \"choice\",\n      Id: i,\n      state: x,\n      setFinish: this.done.bind(this),\n      Next: this.Next,\n      Prev: this.Prev,\n      submit: this.submint,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }) : React.createElement(TrueFalse, {\n      Id: i,\n      state: x,\n      setFinish: this.done.bind(this),\n      Next: this.Next,\n      Prev: this.Prev,\n      submit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }))))))), React.createElement(Footer, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, \"\\u56FE\\u6E90\\uFF1A\\u4E1C\\u5357\\u5927\\u5B66\\u5B98\\u5FAE \\xA0\\u7248\\u6743\\u6240\\u6709\\xA9\")));\n  }\n\n}\n\nexport default Test;","map":{"version":3,"sources":["E:\\projects\\HistotyContest_2019\\HistoryContest-2019\\HistoryContest_2019_client\\src\\Components\\Test\\Test.js"],"names":["React","Row","Col","Tabs","Button","Modal","Layout","Badge","message","Skeleton","bg1","BG","mark","Timer","Choice","TrueFalse","QueueAnim","bg2","lazy","bg3","bg4","bg5","bg6","bg7","bg8","bg9","bg10","bg11","imgs","TabPane","Header","Footer","Content","allChoiceQuestion","require","allJudgeQuestion","Test","Component","constructor","props","state","isTesting","isPaperGet","focusOn","pic","question","i","push","isFinish","kind","title","option","value","done","bind","Next","Prev","submit","e","x","setState","setTimeout","n","Random","arr","length","randomIndex","temp","Math","floor","random","componentWillMount","that","fetch","host","method","mode","headers","token","then","res","json","data","undefined","console","log","status","error","logout","Paper","Choice_question","text","Judgment_question","componentWillUnmount","username","Answer","Username","forEach","body","JSON","stringify","warning","msg","success","isAllDone","answer","score","Score","render","backgroundImage","backgroundSize","backgroundPosition","width","height","position","top","bottom","minWidth","fontSize","color","name","overflow","backgroundColor","marginBottom","marginLeft","textAlign","map","submint"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport { Row, Col, Tabs, Button, Modal, Layout, Badge, message,Skeleton } from 'antd';\r\nimport 'antd/dist/antd.css';\r\nimport './Test.css';\r\nimport bg1 from '../../img/background1.png';\r\nimport BG from '../../img/图片2.jpg'\r\nimport mark from '../../img/校徽实体.png'\r\nimport Timer from '../Timer/Timer';\r\nimport Choice from '../Choice/Choice';\r\nimport TrueFalse from '../TrueFalse/TrueFalse';\r\nimport QueueAnim from 'rc-queue-anim';\r\nconst bg2 = React.lazy(() => import('../../img/background2.png'))\r\nconst bg3 = React.lazy(() => import('../../img/background3.png'))\r\nconst bg4 = React.lazy(() => import('../../img/background4.jpg'))\r\nconst bg5 = React.lazy(() => import('../../img/background5.jpg'))\r\nconst bg6 = React.lazy(() => import('../../img/background6.jpg'))\r\nconst bg7 = React.lazy(() => import('../../img/background7.jpg'))\r\nconst bg8 = React.lazy(() => import('../../img/background8.jpg'))\r\nconst bg9 = React.lazy(() => import('../../img/background9.jpg'))\r\nconst bg10 = React.lazy(() => import('../../img/background10.jpg'))\r\nconst bg11 = React.lazy(() => import('../../img/background11.jpg'))\r\n\r\n\r\n\r\n\r\nlet imgs = [bg1, bg2, bg3, bg4, bg5, bg6, bg7, bg8, bg9, bg10, bg11];\r\nconst { TabPane } = Tabs;\r\nconst { Header, Footer, Content } = Layout;\r\nconst allChoiceQuestion = require(\"../../data/choice_question.json\")\r\nconst allJudgeQuestion = require(\"../../data/judgment_question.json\")\r\nclass Test extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isTesting: false,\r\n            isPaperGet: false,\r\n            focusOn: 0,\r\n            pic: 0,\r\n            question: [],\r\n        }\r\n        for (let i = 0; i < 20; i++) {\r\n            this.state.question.push({\r\n                isFinish: false,\r\n                kind: \"选择题\",\r\n                title: \"\",\r\n                option: [{}, {}, {}, {}],\r\n                value: -1\r\n            });\r\n        }\r\n        for (let i = 20; i < 30; i++) {\r\n            this.state.question.push({\r\n                isFinish: false,\r\n                kind: \"判断题\",\r\n                title: \"\",\r\n                option: ['√', '×'],\r\n                value: -1\r\n            });\r\n        }\r\n        this.done = this.done.bind(this);\r\n        this.Next = this.Next.bind(this);\r\n        this.Prev = this.Prev.bind(this);\r\n        this.submit = this.submit.bind(this);\r\n\r\n    }\r\n    Next(e) {\r\n        if (e) {\r\n            let x = this.state.focusOn;\r\n            x++;\r\n            if (x < 30) {\r\n                this.setState({ focusOn: x })\r\n            }\r\n        }\r\n        else {\r\n            setTimeout(() => {\r\n                let x = this.state.focusOn;\r\n                x++;\r\n                if (x < 30) {\r\n                    this.setState({ focusOn: x })\r\n                }\r\n            }, 500);\r\n        }\r\n    }\r\n    Prev() {\r\n        let n = this.state.focusOn;\r\n        n--;\r\n        if (n >= 0) {\r\n            this.setState({ focusOn: n })\r\n        }\r\n    }\r\n    Random(arr) {\r\n        let length = arr.length,\r\n            randomIndex,\r\n            temp;\r\n        while (length) {\r\n            randomIndex = Math.floor(Math.random() * (--length));\r\n            temp = arr[randomIndex];\r\n            arr[randomIndex] = arr[length];\r\n            arr[length] = temp\r\n        }\r\n        return arr;\r\n    }\r\n    componentWillMount() {\r\n        //测试初始化\r\n        // for (let i = 0; i < 20; i++) {\r\n        //     this.state.question[i].title = allChoiceQuestion[i][\"title\"];\r\n        //     this.state.question[i].option=\r\n        //     [\r\n        //         {\r\n        //             text: allChoiceQuestion[i][\"options\"][0],\r\n        //             value: 1\r\n        //         },\r\n        //         {\r\n        //             text: allChoiceQuestion[i][\"options\"][1],\r\n        //             value: 2\r\n        //         },\r\n        //         {\r\n        //             text: allChoiceQuestion[i][\"options\"][2],\r\n        //             value: 3\r\n        //         },\r\n        //         {\r\n        //             text: allChoiceQuestion[i][\"options\"][3],\r\n        //             value: 4\r\n        //         }\r\n        //     ]\r\n        // }\r\n        // for (let i = 20; i < 30; i++) {\r\n        //     this.state.question[i].title = allJudgeQuestion[i-20][\"title\"];\r\n        // }\r\n        //试卷获取\r\n        this.setState({ isPaperGet: true })\r\n        let that = this;\r\n        fetch('http://' + that.props.state.host + '/api/student/test', {\r\n            method: 'GET',\r\n            mode: 'cors',\r\n            headers: {\r\n                \"authorization\": that.props.state.token,\r\n            },\r\n        }\r\n        ).then(\r\n            res => { return res.json()}\r\n        ).then(\r\n            data => {\r\n                if (data[\"message\"] == undefined) {\r\n                    console.log(data.message)\r\n                    if (data.status == 403) {\r\n                        message.error(\"错误!该用户已完成答题\",1.5);\r\n                        that.props.logout();\r\n                    }\r\n                    else {\r\n                        //that.props.state.answer=data.Choice_question.concat(data.Judgment_question)\r\n                        for (let i = 0; i < 20; i++) {\r\n                            that.state.question[i].title = allChoiceQuestion[data.Paper.Choice_question[i]-1][\"title\"];\r\n                            let temp = [\r\n                                {\r\n                                    text: allChoiceQuestion[data.Paper.Choice_question[i]-1][\"options\"][0],\r\n                                    value: 1\r\n                                },\r\n                                {\r\n                                    text: allChoiceQuestion[data.Paper.Choice_question[i]-1][\"options\"][1],\r\n                                    value: 2\r\n                                },\r\n                                {\r\n                                    text: allChoiceQuestion[data.Paper.Choice_question[i]-1][\"options\"][2],\r\n                                    value: 3\r\n                                },\r\n                                {\r\n                                    text: allChoiceQuestion[data.Paper.Choice_question[i]-1][\"options\"][3],\r\n                                    value: 4\r\n                                }\r\n                            ]\r\n                            that.state.question[i].option = this.Random(temp);\r\n                            that.state.question[i].value=-1;\r\n                        }\r\n                        for (let i = 20; i < 30; i++) {\r\n                            that.state.question[i].title =allJudgeQuestion[data.Paper.Judgment_question[i - 20]-1][\"title\"];\r\n                            that.state.question[i].value=-1;\r\n                        }\r\n                        that.setState({ isPaperGet: true });\r\n                    }\r\n                }\r\n                else {\r\n                    console.log(\"out\")\r\n                    message.error(\"登陆已过期\",1.5);\r\n                    this.props.logout();\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        console.log(this.props.state.username)\r\n    }\r\n\r\n    submit() {\r\n        //暂时的提交函数\r\n        // this.props.setState({\r\n        //     isWelcome: false,\r\n        //     isLogin: true,\r\n        //     isStudent: true,\r\n        //     isAllDone: true,\r\n        //     isAdmin: false,\r\n        //     isTeacher: false,\r\n        //     host: \"\",\r\n\r\n\r\n        //         name: '菜鸡',\r\n        //         username: \"\",\r\n        //         token: '',\r\n        //         access: -1,\r\n        //         score: 90\r\n\r\n        //     answer: this.state.question\r\n        // })\r\n\r\n        //提交函数\r\n        let that = this;\r\n        let data = { Answer: [], Username: this.props.state.username };\r\n        this.state.question.forEach((x, i) => {\r\n            data.Answer.push(x.value)\r\n        })\r\n        fetch(\"http://\" + that.props.state.host + \"/api/student/handin\",\r\n            {\r\n                method: 'POST',\r\n                mode: 'cors',\r\n                headers: {\r\n                    \"authorization\": that.props.state.token,\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(data)\r\n            }).then(async (res) => {\r\n                if (res.status == 403) {\r\n                    message.warning(\"非法答题!\",1.5)\r\n                }\r\n                else {\r\n                    let data = await res.json();\r\n                    if (data.message == undefined) {\r\n                        if(data.msg==\"答题时间过短,请认真答题\"){\r\n                            message.warning(\"答题时间过短,请认真答题\",1)\r\n                        }\r\n                        else{\r\n                        console.log(\"handin successfully\");\r\n                        message.success(\"提交成功!\",1.5);\r\n                        that.props.setState({ isAllDone: true, answer: that.state.question })\r\n                        that.props.setState({ score: data.Score })\r\n                        }\r\n                    }\r\n                    else {\r\n                        message.error(\"登陆已过期\",1.5);\r\n                        this.props.logout();\r\n                    }\r\n                }\r\n            }\r\n            )\r\n\r\n    }\r\n    done(i, value) {\r\n        let x = this.state.question;\r\n        x[i].isFinish = true;\r\n        x[i].value = value;\r\n        this.setState({ question: x });\r\n    }\r\n    render() {\r\n        if (!this.state.isTesting) {\r\n            return (\r\n                <div style={{\r\n                    backgroundImage: `url(${BG})`,\r\n                    backgroundSize: 'cover',\r\n                    backgroundPosition: 'center',\r\n                    width: \"100%\", height: \"100%\",\r\n                    position: \"absolute\",\r\n                    top: \"0px\",\r\n                    bottom: \"0px\",\r\n                    minWidth:\"700px\"\r\n                }}>\r\n                    <Modal\r\n                        visible={!this.state.isTesting}\r\n                        title=\"答题须知\"\r\n                        centered={true}\r\n                        footer={[\r\n                            <Button type=\"primary\" loading={!this.state.isPaperGet}\r\n                                onClick={() => {\r\n                                    let that = this;\r\n                                    //temp\r\n                                    //  \r\n                                    //开始函数\r\n                                    fetch(\"http://\" + this.props.state.host + '/api/student/start',\r\n                                        {\r\n                                            method: 'GET',\r\n                                            mode: 'cors',\r\n                                            headers: {\r\n                                                \"authorization\": that.props.state.token\r\n                                            },\r\n                                        }\r\n                                        ).then((data) => {\r\n                                                if (data.message == undefined) {\r\n                                                    message.success(\"答题开始,加油!\",1.5)\r\n                                                    that.setState({ isTesting: true })\r\n                                                }\r\n                                                else {\r\n                                                    message.error(\"登陆已过期\",1.5);\r\n                                                    this.props.logout();\r\n                                                }\r\n                                            })\r\n\r\n                                }}>\r\n                                开始答题\r\n                      </Button>\r\n                        ]}>\r\n                        <b style={{ fontSize: \"18px\", color: \"#1890ff\" }}>&nbsp;{this.props.state.name}同学,你好!</b><br></br>\r\n                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;欢迎来到校史校情竞赛答题!</p><p></p>\r\n\r\n                        <ul style={{ fontSize: \"15px\" }}>\r\n\r\n                            <li key=\"1\">本答题共有<b>30道题</b>,&nbsp;其中有<b>20道选择题,&nbsp;10道判断题</b></li>\r\n\r\n                            <li key=\"2\">选择题每道4分,&nbsp;判断题每道2分,&nbsp;满分共<b>100分</b></li>\r\n\r\n                            <li key=\"3\">答题时限为<b>3分钟-30分钟</b>,&nbsp;3分钟之前无法交卷,&nbsp;30分钟时自动交卷</li>\r\n\r\n                            <li key=\"4\">在未成功交卷前,&nbsp;出现特殊情况,可重新进入答题</li>\r\n\r\n                            <li key=\"5\">对本答题系统有疑问,&nbsp;可联系在场负责老师</li>\r\n\r\n                        </ul>\r\n                    </Modal>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n                <Layout style={{ overflow: \"hidder\", minWidth: \"1000px\" ,height:\"100%\"}}>\r\n                    <Header>\r\n                        <Row>\r\n                            <QueueAnim delay={100} duration={700}>\r\n                            <Col span={16} offset={0} key=\"1\">\r\n                                <h1 style={{ color: 'white', fontSize: \"calc(15px + 2vmin)\" }}><img src={mark} height=\"45px\" width=\"45px\" />&nbsp;东南大学校史校情知识竞赛</h1>\r\n                            </Col>\r\n                            <Col span={4} offset={3} key=\"2\">\r\n                                <Timer state={this.state} setState={this.setState.bind(this)} finish={this.submit} min={29} sec={59} info={\"  答题倒计时：\"} />\r\n                            </Col>\r\n                            </QueueAnim>\r\n                        </Row>\r\n                    </Header>\r\n                    <Content style={{ backgroundColor: 'rgb(17,17,19)' }}>\r\n                        <Row >\r\n                            <Col span={22} offset={1}>\r\n                                <Tabs className=\"background-1\"\r\n                                    activeKey={`${this.state.focusOn}`}\r\n                                    animated='true'\r\n                                    onTabClick={(x) => { this.setState({ focusOn: x }) }}\r\n                                    tabBarGutter='0'\r\n                                    tabPosition=\"bottom\"\r\n                                    style={{ marginBottom: \"0\", marginLeft: \"0px\", textAlign: \"center\" }}>\r\n                                    {this.state.question.map((x, i) => (\r\n                                        <TabPane tab={!x.isFinish ?\r\n                                            <Badge dot={true} > <div style={{ color: 'white' }}>{i + 1}</div></Badge> :\r\n                                            <div style={{ color: 'white' }}>{i + 1}</div>}\r\n                                            key={i}\r\n                                            onChange={() => { this.done(i) }}\r\n                                            style={{ textAlign: \"left\" }}\r\n                                        >\r\n                                            {x.kind==\"选择题\" ?\r\n                                                <Choice className=\"choice\" Id={i} state={x} setFinish={this.done.bind(this)} Next={this.Next} Prev={this.Prev}\r\n                                                    submit={this.submint} />\r\n                                                : <TrueFalse Id={i} state={x} setFinish={this.done.bind(this)} Next={this.Next} Prev={this.Prev} submit={this.submit} />\r\n                                            }\r\n\r\n                                        </TabPane>)\r\n                                    )\r\n                                    }\r\n                                </Tabs>\r\n                            </Col>\r\n                        </Row>\r\n                    </Content>\r\n                    <Footer style={{ textAlign: 'center' }}>图源：东南大学官微 &nbsp;版权所有©</Footer>\r\n                </Layout>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nexport default Test\r\n"]},"metadata":{},"sourceType":"module"}